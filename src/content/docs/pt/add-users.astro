---
import type { Locale } from '../../../i18n/locales';
interface Props { locale: Locale; }
const { locale } = Astro.props;
---

<h1>Adicionar Utilizadores e Grupos</h1>
<p class="subtitle">Passo a passo: crie a estrutura de utilizadores da sua empresa no Authentik.</p>

<h2><span class="step-number">1</span> Planear os Seus Grupos</h2>
<p>Pense nas fun√ß√µes da sua empresa. Cada grupo mapeia um conjunto de permiss√µes em todas as aplica√ß√µes. Exemplos comuns:</p>
<table>
  <tr><th>Grupo</th><th>Quem pertence</th><th>O que obt√™m</th></tr>
  <tr><td><code>engineering</code></td><td>Programadores, DevOps</td><td>Acesso total ao c√≥digo, wiki leitura/escrita, quadros de tarefas</td></tr>
  <tr><td><code>management</code></td><td>Team leads, executivos</td><td>Wiki admin, aprova√ß√£o de folhas de horas, c√≥digo apenas leitura</td></tr>
  <tr><td><code>hr</code></td><td>Equipa de RH</td><td>Wiki admin, aprova√ß√£o de folhas de horas, SEM acesso ao c√≥digo</td></tr>
  <tr><td><code>design</code></td><td>Designers</td><td>Acesso a ficheiros, wiki leitura/escrita, quadros de tarefas</td></tr>
</table>

<h2><span class="step-number">2</span> Criar Grupos no Authentik</h2>
<ol>
  <li>Abra o admin do Authentik: <a href="http://auth.localhost/if/admin/#/identity/groups">auth.localhost/if/admin ‚Üí Directory ‚Üí Groups</a></li>
  <li>Clique em <strong>Create</strong></li>
  <li>Introduza o nome do grupo (ex.: <code>engineering</code>)</li>
  <li>Clique em <strong>Create</strong></li>
</ol>
<p>Em segundos, os 4 adapters recebem um webhook e criam os recursos correspondentes:</p>
<ul>
  <li>Gitea: organiza√ß√£o <code>engineering</code></li>
  <li>Mattermost: canal <code>engineering</code></li>
  <li>Outline: grupo <code>engineering</code></li>
  <li>Stalwart: lista de distribui√ß√£o <code>engineering@seudominio.com</code></li>
</ul>

<h2><span class="step-number">3</span> Criar Utilizadores</h2>
<ol>
  <li>Aceda a <strong>Directory ‚Üí Users</strong> no admin do Authentik</li>
  <li>Clique em <strong>Create</strong></li>
  <li>Preencha: username, nome de exibi√ß√£o, e-mail</li>
  <li>Defina uma palavra-passe tempor√°ria (o utilizador pode alterar no primeiro login)</li>
  <li>Clique em <strong>Create</strong></li>
</ol>

<h2><span class="step-number">4</span> Adicionar Utilizadores a Grupos</h2>
<ol>
  <li>Abra o utilizador que acabou de criar</li>
  <li>Aceda ao separador <strong>Groups</strong></li>
  <li>Clique em <strong>Add to existing group</strong></li>
  <li>Selecione o(s) grupo(s) a que este utilizador pertence</li>
</ol>

<div class="callout callout-tip">
  <strong>üí° O que acontece a seguir</strong>
  O Authentik dispara um webhook. Se o utilizador j√° tiver feito login numa aplica√ß√£o, √© imediatamente adicionado ao grupo/canal/organiza√ß√£o. Se ainda n√£o tiver feito login, a ades√£o fica em fila de espera e √© aplicada automaticamente no primeiro login.
</div>

<h2><span class="step-number">5</span> Informar os Utilizadores para Fazerem Login</h2>
<p>Partilhe os URLs das aplica√ß√µes com os seus utilizadores. No primeiro login em qualquer aplica√ß√£o via SSO:</p>
<ol>
  <li>Uma conta local √© criada automaticamente na aplica√ß√£o</li>
  <li>Todas as ades√µes a grupos pendentes s√£o aplicadas</li>
  <li>Se o Stalwart estiver ativado, uma caixa de correio √© provisionada automaticamente</li>
  <li>Se o onboarding do Mattermost estiver ativado, recebem uma mensagem de boas-vindas com links de comunica√ß√£o</li>
</ol>
