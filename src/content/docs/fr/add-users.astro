---
import type { Locale } from '../../../i18n/locales';
interface Props { locale: Locale; }
const { locale } = Astro.props;
---

<h1>Ajouter des utilisateurs et des groupes</h1>
<p class="subtitle">√âtape par √©tape : cr√©ez la structure utilisateur de votre entreprise dans Authentik.</p>

<h2><span class="step-number">1</span> Planifier vos groupes</h2>
<p>R√©fl√©chissez aux fonctions de votre entreprise. Chaque groupe correspond √† un ensemble de permissions dans toutes les applications. Exemples courants :</p>
<table>
  <tr><th>Groupe</th><th>Qui en fait partie</th><th>Ce qu'ils obtiennent</th></tr>
  <tr><td><code>engineering</code></td><td>D√©veloppeurs, DevOps</td><td>Acc√®s complet au code, lecture/√©criture wiki, tableaux de t√¢ches</td></tr>
  <tr><td><code>management</code></td><td>Chefs d'√©quipe, dirigeants</td><td>Admin wiki, approbation des feuilles de temps, code en lecture seule</td></tr>
  <tr><td><code>hr</code></td><td>√âquipe RH</td><td>Admin wiki, approbation des feuilles de temps, PAS d'acc√®s au code</td></tr>
  <tr><td><code>design</code></td><td>Designers</td><td>Acc√®s aux fichiers, lecture/√©criture wiki, tableaux de t√¢ches</td></tr>
</table>

<h2><span class="step-number">2</span> Cr√©er des groupes dans Authentik</h2>
<ol>
  <li>Ouvrez l'administration Authentik : <a href="http://auth.localhost/if/admin/#/identity/groups">auth.localhost/if/admin ‚Üí Directory ‚Üí Groups</a></li>
  <li>Cliquez sur <strong>Create</strong></li>
  <li>Saisissez le nom du groupe (ex. : <code>engineering</code>)</li>
  <li>Cliquez sur <strong>Create</strong></li>
</ol>
<p>En quelques secondes, les 4 adapters re√ßoivent un webhook et cr√©ent les ressources correspondantes :</p>
<ul>
  <li>Gitea : organisation <code>engineering</code></li>
  <li>Mattermost : canal <code>engineering</code></li>
  <li>Outline : groupe <code>engineering</code></li>
  <li>Stalwart : liste de diffusion <code>engineering@votredomaine.com</code></li>
</ul>

<h2><span class="step-number">3</span> Cr√©er des utilisateurs</h2>
<ol>
  <li>Allez dans <strong>Directory ‚Üí Users</strong> dans l'administration Authentik</li>
  <li>Cliquez sur <strong>Create</strong></li>
  <li>Remplissez : nom d'utilisateur, nom d'affichage, email</li>
  <li>D√©finissez un mot de passe temporaire (l'utilisateur pourra le changer √† la premi√®re connexion)</li>
  <li>Cliquez sur <strong>Create</strong></li>
</ol>

<h2><span class="step-number">4</span> Ajouter des utilisateurs aux groupes</h2>
<ol>
  <li>Ouvrez l'utilisateur que vous venez de cr√©er</li>
  <li>Allez dans l'onglet <strong>Groups</strong></li>
  <li>Cliquez sur <strong>Add to existing group</strong></li>
  <li>S√©lectionnez le ou les groupes auxquels cet utilisateur appartient</li>
</ol>

<div class="callout callout-tip">
  <strong>üí° Ce qui se passe ensuite</strong>
  Authentik envoie un webhook. Si l'utilisateur s'est d√©j√† connect√© √† une application, il est imm√©diatement ajout√© au groupe/canal/organisation. S'il ne s'est pas encore connect√©, l'adh√©sion est mise en file d'attente et appliqu√©e automatiquement lors de sa premi√®re connexion.
</div>

<h2><span class="step-number">5</span> Inviter les utilisateurs √† se connecter</h2>
<p>Partagez les URL des applications avec vos utilisateurs. Lors de la premi√®re connexion √† une application via SSO :</p>
<ol>
  <li>Un compte local est automatiquement cr√©√© dans l'application</li>
  <li>Toutes les adh√©sions de groupe en attente sont appliqu√©es</li>
  <li>Si Stalwart est activ√©, une bo√Æte mail est provisionn√©e automatiquement</li>
  <li>Si l'onboarding Mattermost est activ√©, l'utilisateur re√ßoit un message de bienvenue avec les liens de communication</li>
</ol>
