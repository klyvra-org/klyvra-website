---
import type { Locale } from '../../../i18n/locales';
interface Props { locale: Locale; }
const { locale } = Astro.props;
---

<h1>Votre premiÃ¨re connexion</h1>
<p class="subtitle">CrÃ©ez un compte administrateur, comprenez le flux SSO et connectez-vous Ã  chaque application.</p>

<h2><span class="step-number">1</span> CrÃ©er l'administrateur Authentik</h2>
<p>Ouvrez <a href="http://auth.localhost/if/flow/initial-setup/">http://auth.localhost/if/flow/initial-setup/</a> dans votre navigateur.</p>
<p>Vous verrez un formulaire de configuration initial. CrÃ©ez votre compte administrateur avec un mot de passe robuste. C'est la seule Ã©tape manuelle de toute l'installation.</p>

<div class="callout callout-warn">
  <strong>âš ï¸ Conservez ces identifiants</strong>
  Il s'agit du compte administrateur Authentik. Si vous le perdez, vous devrez le rÃ©initialiser via la base de donnÃ©es. Pensez Ã  le stocker dans Vaultwarden une fois celui-ci opÃ©rationnel !
</div>

<h2><span class="step-number">2</span> Explorer le panneau d'administration</h2>
<p>AprÃ¨s avoir crÃ©Ã© votre compte, rendez-vous sur <a href="http://auth.localhost/if/admin/">http://auth.localhost/if/admin/</a>. Vous y trouverez :</p>
<ul>
  <li>Applications â€” les 10 applications sont prÃ©configurÃ©es (par les blueprints)</li>
  <li>Providers â€” 7 fournisseurs OIDC + 1 SAML, tous connectÃ©s</li>
  <li>Users â€” uniquement votre compte administrateur pour l'instant</li>
  <li>Groups â€” prÃªts pour crÃ©er la structure de votre entreprise</li>
</ul>

<h2><span class="step-number">3</span> Se connecter Ã  une application</h2>
<p>AccÃ©dez Ã  n'importe quelle URL d'application, par exemple <a href="http://docs.localhost">docs.localhost</a> (Outline). Vous verrez une page de connexion avec un bouton SSO :</p>
<ul>
  <li>Outline â†’ Â« Continue with OIDC Â»</li>
  <li>Mattermost â†’ Â« GitLab Â» (c'est en rÃ©alitÃ© Authentik â€” Mattermost appelle tout OAuth2 Â« GitLab Â»)</li>
  <li>Gitea â†’ Â« Sign in with Authentik Â»</li>
  <li>Seafile â†’ Â« Single Sign-On Â»</li>
  <li>Kimai â†’ Â« Login with Authentik Â»</li>
  <li>Vikunja â†’ Â« Authentik Â»</li>
  <li>Vaultwarden â†’ Â« Enterprise Single Sign-On Â» (saisissez n'importe quel email â†’ SSO redirige vers Authentik)</li>
</ul>
<p>Cliquez sur le bouton SSO â†’ vous Ãªtes redirigÃ© vers Authentik â†’ connectez-vous â†’ redirigÃ© vers l'application, connectÃ©. C'est le flux pour toutes les applications.</p>

<div class="callout callout-tip">
  <strong>ğŸ’¡ Provisionnement automatique</strong>
  Vous n'avez pas besoin de crÃ©er des comptes dans chaque application. La premiÃ¨re fois que vous vous connectez via SSO, un compte local est automatiquement crÃ©Ã© dans l'application avec votre email et nom d'affichage Authentik.
</div>

<h2><span class="step-number">4</span> Stalwart Mail</h2>
<p>Stalwart fonctionne lÃ©gÃ¨rement diffÃ©remment â€” les boÃ®tes mail sont crÃ©Ã©es automatiquement lors de la premiÃ¨re connexion SSO (provisionnement JIT). AprÃ¨s vous Ãªtre connectÃ© sur <a href="http://mail.localhost">mail.localhost</a>, votre boÃ®te mail est prÃªte pour IMAP/SMTP :</p>
<ul>
  <li>IMAP : <code>mail.localhost:143</code></li>
  <li>SMTP : <code>mail.localhost:587</code></li>
  <li>Nom d'utilisateur : votre email Authentik</li>
</ul>

<h2><span class="step-number">5</span> Et ensuite</h2>
<p>Maintenant que vous pouvez vous connecter, l'Ã©tape suivante est de configurer la structure de groupes de votre entreprise :</p>
<ul>
  <li><a href="/docs/add-users">Ajouter des utilisateurs et des groupes</a> â€” crÃ©ez de vrais utilisateurs et assignez-les Ã  des groupes</li>
  <li><a href="/docs/rbac">RBAC & correspondance des groupes</a> â€” comprenez comment les groupes se traduisent en permissions par application</li>
</ul>
