---
import type { Locale } from '../../../i18n/locales';
interface Props { locale: Locale; }
const { locale } = Astro.props;
---

<h1>Ihr erster Login</h1>
<p class="subtitle">Admin-Konto erstellen, den SSO-Ablauf verstehen und sich bei jeder App anmelden.</p>

<h2><span class="step-number">1</span> Authentik-Admin erstellen</h2>
<p>Ã–ffnen Sie <a href="http://auth.localhost/if/flow/initial-setup/">http://auth.localhost/if/flow/initial-setup/</a> in Ihrem Browser.</p>
<p>Sie sehen ein einmaliges Setup-Formular. Erstellen Sie Ihr Admin-Konto mit einem sicheren Passwort. Dies ist der einzige manuelle Schritt im gesamten Setup.</p>

<div class="callout callout-warn">
  <strong>âš ï¸ Zugangsdaten sichern</strong>
  Dies ist das Authentik-Admin-Konto. Wenn Sie es verlieren, mÃ¼ssen Sie es Ã¼ber die Datenbank zurÃ¼cksetzen. Speichern Sie es am besten in Vaultwarden, sobald es lÃ¤uft!
</div>

<h2><span class="step-number">2</span> Admin-Panel erkunden</h2>
<p>Nach der Erstellung Ihres Kontos navigieren Sie zu <a href="http://auth.localhost/if/admin/">http://auth.localhost/if/admin/</a>. Sie sehen:</p>
<ul>
  <li>Applications â€” alle 10 Apps sind vorkonfiguriert (durch blueprints erledigt)</li>
  <li>Providers â€” 7 OIDC + 1 SAML Provider, alle eingerichtet</li>
  <li>Users â€” bisher nur Ihr Admin-Konto</li>
  <li>Groups â€” bereit fÃ¼r die Erstellung Ihrer Unternehmensstruktur</li>
</ul>

<h2><span class="step-number">3</span> Bei einer App anmelden</h2>
<p>Ã–ffnen Sie eine beliebige App-URL, z. B. <a href="http://docs.localhost">docs.localhost</a> (Outline). Sie sehen eine Anmeldeseite mit einem SSO-Button:</p>
<ul>
  <li>Outline â†’ â€Continue with OIDC"</li>
  <li>Mattermost â†’ â€GitLab" (eigentlich Authentik â€” Mattermost nennt alle OAuth2-Anbieter â€GitLab")</li>
  <li>Gitea â†’ â€Sign in with Authentik"</li>
  <li>Seafile â†’ â€Single Sign-On"</li>
  <li>Kimai â†’ â€Login with Authentik"</li>
  <li>Vikunja â†’ â€Authentik"</li>
  <li>Vaultwarden â†’ â€Enterprise Single Sign-On" (beliebige E-Mail eingeben â†’ SSO leitet zu Authentik weiter)</li>
</ul>
<p>Klicken Sie den SSO-Button â†’ Sie werden zu Authentik weitergeleitet â†’ anmelden â†’ zurÃ¼ck zur App, eingeloggt. Das ist der Ablauf fÃ¼r alle Apps.</p>

<div class="callout callout-tip">
  <strong>ğŸ’¡ Auto-Provisioning</strong>
  Sie mÃ¼ssen in keiner App manuell Konten anlegen. Beim ersten Login via SSO wird automatisch ein lokales Konto in der jeweiligen App mit Ihrer Authentik-E-Mail und Ihrem Anzeigenamen erstellt.
</div>

<h2><span class="step-number">4</span> Stalwart Mail</h2>
<p>Stalwart funktioniert etwas anders â€” PostfÃ¤cher werden beim ersten SSO-Login automatisch erstellt (JIT-Provisioning). Nach dem Login unter <a href="http://mail.localhost">mail.localhost</a> ist Ihr Postfach fÃ¼r IMAP/SMTP erreichbar:</p>
<ul>
  <li>IMAP: <code>mail.localhost:143</code></li>
  <li>SMTP: <code>mail.localhost:587</code></li>
  <li>Benutzername: Ihre Authentik-E-Mail-Adresse</li>
</ul>

<h2><span class="step-number">5</span> Wie geht es weiter?</h2>
<p>Nachdem Sie sich anmelden kÃ¶nnen, ist der nÃ¤chste Schritt die Einrichtung Ihrer Unternehmens-Gruppenstruktur:</p>
<ul>
  <li><a href="/docs/add-users">Benutzer & Gruppen hinzufÃ¼gen</a> â€” echte Benutzer erstellen und Gruppen zuweisen</li>
  <li><a href="/docs/rbac">RBAC & Gruppen-Mapping</a> â€” verstehen, wie Gruppen auf App-spezifische Berechtigungen Ã¼bertragen werden</li>
</ul>
